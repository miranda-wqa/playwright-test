# ğŸš€ Workflow to deploy the latest Playwright test report to GitHub Pages
name: ğŸŒ Deploy Playwright Report to GitHub Pages

on:
  workflow_dispatch: # ğŸ”„ Manual trigger from GitHub Actions UI

jobs:
  deploy:
    name: ğŸŒ Deploy to GitHub Pages
    runs-on: ubuntu-latest
    steps:
      - name: ğŸ§‘â€ğŸ’» Checkout code
        uses: actions/checkout@v2

      - name: ğŸ“¥ Download Latest Playwright Report Artifact
        uses: actions/download-artifact@v3
        with:
          name: playwright-report  # ğŸ“¦ Artifact name (same as uploaded in the first workflow)

      - name: ğŸš€ Deploy Playwright Report to GitHub Pages
        uses: peaceiris/actions-gh-pages@v3
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          publish_dir: playwright-report  # ğŸ“‚ Path to the downloaded report
          publish_branch: gh-pages       # ğŸŒ¿ The branch where the report will be published
          allow_empty_commit: true       # âœ… Allow empty commits to be pushed when no changes occur
          force_orphan: true             # ğŸ’¡ Create a new orphan branch if necessary
          keep_files: false             # âŒ Delete previous report files before pushing new ones
          enable_jekyll: false           # ğŸš« Disable Jekyll for the repository if not using it

